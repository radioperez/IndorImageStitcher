## Актуальность
В наше время для оценки состояния дорожно-транспортной сети и планирования ремонтных работ широко используются передвижные дорожные лаборатории. С их помощью осуществляется съемка всей протяженности исследуемой дороги, и полученный видео- или фоторяд используется для дальнейшего анализа.
Оператор вручную просматривает видеопоток и фиксирует объекты анализа (трещины, ямы, повреждения кромки дороги, линий разметки, заплаток).  Такой процесс крайне трудоемок и требует оптимизации.
**Цель** данного проекта - создать инструмент, который сможет объединить весь фоторяд в единое изображение автомобильной дороги, "развертку", наподобие ортофотоплана.
**Задачи**:
- Трансформировать центральную проекцию в параллельную
	- Автоматизировать выделение параллельной проекции из изображения
- Получить на основе трансформированного фоторяда ортофотоплан
	- Оптимизировать алгоритм для работы с "извилистыми" дорогами
## Проекции
Любое изображение *проецирует* реальный мир на двумерную плоскость, т.е. преобразует точки трехмерного пространства в точки двумерного пространства.
Зачастую эта проекция строится при помощи прямых проецирующих лучей, исходящих из центра проекции. Эти проекции относят к классу *простых геометрических*, и разделяют на два вида: центральные(перспективные) и параллельные.
Для центральных проекций расстояние от центра проекции до проекционной плоскости конечно, а для параллельных проекций это расстояние бесконечно.
Близость центра проекции приводит к нарушению параллельности - прямые, которые в трехмерном пространстве параллельны, на проекции сходятся в 1-3 точки схода (единственным исключением являются линии, перпендикулярные точкам схода).
## Ортофотопланы
Параллельные ортографические проекции -  особый класс проекций, что направление проекции является нормалью к плоскости проекции, т.н. "вид сверху". Центр проекции бесконечно удален от проекционной плоскости.
Ортофотоплан – это ортогональное фото-представление местности, на котором представлена земная поверхность и объекты на ней с точной привязкой к заданной системе координат. Создается он на основе снимков, полученных во время аэрофотосъемки.
### Различия между ортофотопланом и задачей курсовой
При создании ортофотоплана обычно используются беспилотные летательные аппараты (БПЛА). Изображения, снятые БПЛА, дополняются метаданными в формате EXIF - Exchangeable Image File Format, и могут содержать координаты дрона, угол наклона камеры, высоту полета. Эти данные можно использовать в расчетах для коррекции перспективных искажений. 
Для задачи курсовой важно учесть следующее:
- Данные о координатах съемки могут отсутствовать или быть недостаточно точны (из-за погрешности GPS)
- Высота, угол наклона камеры не известны/могут измениться в рамках одного фоторяда
## Элементарный подход - наложение изображений
Из каждого изображения фоторяда выделили участок дороги, затем наложили их с долей 80% (т.е. 20% каждого изображения включаются в картинку). Такой подход 
- предполагает что машина всегда движется с постоянной скоростью, 
- требует подбирать долю наложения вручную для каждого фоторяда,
- может сильно исказить реальную местность при отсутствии очевидных общих точек на двух фото
## Определение признаков
Для более значимого объединения изображений нужно основываться на сопоставлении признаков. Признак на изображении - это такой участок изображения, который несет информационный смысл. В рамках данного проекта это могут быть трещины, дорожная разметка, тени и т.д.
Существует несколько методов выделения признаков:
- Определитель углов Хэрриса
  Метод вычисляет для каждого пикселя рейтинг, который основан на производных во всех направлениях от пикселя. Высокие значения даются участкам изображения с углами или краями.
  Модификация Ши-Томаси дает похожие результаты с увеличенной производительностью.
- SIFT - Scale Invariant Feature Transform
  В отличие от других методов, SIFT универсален относительно масштаба. В процессе определения генерируется несколько изображений разных размеров с разными уровнями Гауссовского размытия, и затем выделяются признаки, сохранившиеся на всех изображениях. 
  Также для каждой точки вычисляется дескриптор, 128-элементный вектор, который может быть использован для сравнения ключевых точек.
- ORB - Oriented FAST and Rotated BRIEF
  Метод ORB оптимизирован на определение признаков в реальном времени. Вокруг выбранной точки строится окружность, и определяется количество точек на окружности, для которых разность в яркости с исходной точкой превышает t. При большом количестве таких точек исходная точка признается углом. 
  Вместо векторных дескрипторов на подобие SIFT, ORB применяет бинарные строки.
  
Дескрипторы применяются для поиска совпадений между точками на нескольких изображениях. На основе совпадений можно построить матрицу преобразований и наложить изображения друг на друга.


